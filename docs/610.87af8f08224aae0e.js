"use strict";(self.webpackChunknebular_downgrade_2=self.webpackChunknebular_downgrade_2||[]).push([[610],{7610:(we,C,m)=>{m.r(C),m.d(C,{EmpModule:()=>Ve});var f=m(177),i=m(9417),d=m(4069),p=m(7037),c=m(3955),R=m(1322),k=m(1626),g=m(9615),T=m(9213),I=m(2042),N=m(3922),h=m(5743),_=m(6962),e=m(7705),y=m(3878),F=m(8932),S=m(2741);function D(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Name is required")," "))}function M(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"min length 3 Letters")," "))}function j(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"NationalId pattern")," "))}function G(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"NationalId min length")," "))}function L(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"NationalId max length")," "))}function P(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"NationalId not contain negative number")," "))}function Y(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Phone pattern")," "))}function U(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Phone min length")," "))}function X(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Phone max length")," "))}function x(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Phone not contain negative number")," "))}function A(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Mobil pattern")," "))}function B(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Mobil not contain negative number")," "))}function O(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Mobil min length")," "))}function J(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Mobil max length")," "))}function V(t,a){if(1&t&&(e.j41(0,"nb-option",26),e.EFF(1),e.k0s()),2&t){const o=a.$implicit;e.Y8G("value",o.id),e.R7$(1),e.SpI(" ",o.departmentName,"")}}let w=(()=>{class t{constructor(o,r,n,l,s,u,E){this.formBuilder=o,this.empService=r,this.deptService=n,this.router=l,this.route=s,this.toastrService=u,this.translate=E,this.submitted=!1,this.isSubmitted=!1,this.showPass=!1,this.departments=[],this.DeptIds=[],(null==localStorage.getItem("token")||""==localStorage.getItem("token"))&&this.router.navigateByUrl("/auth")}ngOnInit(){this.initForm(),this.getDepartmenst()}getDepartmenst(){this.deptService.searchDepartments({PageNumber:1,PageSize:1e3}).subscribe(o=>{this.departments=o.entity.entities.filter(r=>""!=r.departmentName)})}initForm(){this.empForm=this.formBuilder.group({name:["",[i.k0.required,i.k0.minLength(3)]],nationalId:[null,[i.k0.pattern("^[0-9]*$"),i.k0.minLength(10),i.k0.min(0),i.k0.maxLength(10)]],phone:[null,[i.k0.pattern("^[0-9]*$"),i.k0.minLength(10),i.k0.min(0),i.k0.maxLength(10)]],mobil:[null,[i.k0.pattern("^[0-9]*$"),i.k0.minLength(10),i.k0.min(0),i.k0.maxLength(12)]],email:[""],notes:[""],deptId:[null,[i.k0.required]]})}selectChangeHandlerDept(o){this.DeptIds=o,console.log("Departments= "+o)}selectChangeHandlerJob(o){this.JobId=o.target.value,console.log("Job= "+this.JobId)}onSubmit(){if(this.submitted=!0,this.isSubmitted=!0,this.empForm.invalid)return;const o=this.empForm.value;let r={name:o.name,nationalId:o.nationalId,phone:o.phone,email:o.email,mobil:o.mobil,notes:o.notes,jobId:this.JobId,deptIds:this.DeptIds};const n=l=>!/\S/.test(l);1==n(r.name)||1==n(r.mobil)?this.toastrService.danger("\u064a\u062c\u0628 \u0625\u0633\u062a\u0643\u0645\u0627\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a  \u0644\u0625\u062a\u0645\u0627\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0641\u0638","\u062e\u0637\u0623"):(r.mobil=o.mobil,console.log("Mobil number is= "+r.mobil),this.empService.addEmployee(r).subscribe({next:l=>{this.toastrService.Create(_.C.Employee),this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/Employee")},error:l=>{this.toastrService.danger(l.error.error,"\u062e\u0637\u0623"),this.submitted=!1,this.isSubmitted=!1}}))}get fc(){return this.empForm.controls}get deptIds(){return this.deptIds.controls.deptIds}static{this.\u0275fac=function(r){return new(r||t)(e.rXU(i.ok),e.rXU(y.O),e.rXU(F.a),e.rXU(h.Ix),e.rXU(h.nX),e.rXU(S.t),e.rXU(c.c$))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-add-employee"]],decls:83,vars:50,consts:[[1,"content-container","mt-5"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","Name",1,"label"],["type","text","formControlName","name","nbInput","","shape","round","fullWidth","","id","name"],[4,"ngIf"],["for","NationalId",1,"label"],["type","text","inputmode","numeric","pattern","[-+]?[0-9]*[.,]?[0-9]+","minlength","10","maxlength","10","formControlName","nationalId","nbInput","","shape","round","fullWidth","","id","nationalId"],[1,"form-group","mt-2"],["for","Phone",1,"label"],["min","0","type","text","inputmode","numeric","pattern","[-+]?[0-9]*[.,]?[0-9]+","maxlength","10","placeholder","Ex:1570572194","formControlName","phone","nbInput","","shape","round","fullWidth","","id","phone"],["for","Mobil",1,"label"],["min","0","type","text","inputmode","numeric","pattern","[0-9]*[.,]?[0-9]+","maxlength","12","placeholder","Ex:9665657801391","formControlName","mobil","nbInput","","shape","round","fullWidth","","id","mobil"],["for","Email",1,"label"],["type","text","placeholder","Ex: dmostafa@jeddah.gov.sa","formControlName","email","nbInput","","shape","round","fullWidth","","id","email"],["for","Job",1,"label"],["for","Department",1,"label"],["shape","round","fullWidth","","multiple","","formControlName","deptId","id","deptId",1,"mt-2",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],["for","Notes",1,"label"],["type","text","formControlName","notes","nbInput","","shape","round","fullWidth","","id","notes"],[1,"row","mt-2"],[1,"col-md-2"],["type","submit",1,"special-button","m-2","mt-4","w-100",3,"disabled"],[3,"value"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"h5"),e.EFF(2),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"hr"),e.j41(6,"form",1),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(7,"div",2)(8,"div",3)(9,"div",4)(10,"label",5)(11,"h6"),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.nrm(14,"input",6),e.DNE(15,D,3,3,"mat-error",7),e.DNE(16,M,3,3,"mat-error",7),e.k0s()(),e.j41(17,"div",3)(18,"div",4)(19,"label",8)(20,"h6"),e.EFF(21),e.nI1(22,"translate"),e.k0s()(),e.nrm(23,"input",9),e.DNE(24,j,3,3,"mat-error",7),e.DNE(25,G,3,3,"mat-error",7),e.DNE(26,L,3,3,"mat-error",7),e.DNE(27,P,3,3,"mat-error",7),e.k0s()(),e.j41(28,"div",3)(29,"div",10)(30,"label",11)(31,"h6"),e.EFF(32),e.nI1(33,"translate"),e.k0s()(),e.nrm(34,"input",12),e.DNE(35,Y,3,3,"mat-error",7),e.DNE(36,U,3,3,"mat-error",7),e.DNE(37,X,3,3,"mat-error",7),e.DNE(38,x,3,3,"mat-error",7),e.k0s()(),e.j41(39,"div",3)(40,"div",10)(41,"label",13)(42,"h6"),e.EFF(43),e.nI1(44,"translate"),e.k0s()(),e.nrm(45,"input",14),e.DNE(46,A,3,3,"mat-error",7),e.DNE(47,B,3,3,"mat-error",7),e.DNE(48,O,3,3,"mat-error",7),e.DNE(49,J,3,3,"mat-error",7),e.k0s()(),e.j41(50,"div",3)(51,"div",10)(52,"label",15)(53,"h6"),e.EFF(54),e.nI1(55,"translate"),e.k0s()(),e.nrm(56,"input",16),e.k0s()(),e.j41(57,"div",3)(58,"div",10)(59,"label",17)(60,"h6"),e.EFF(61),e.nI1(62,"translate"),e.k0s()()()(),e.j41(63,"div",3)(64,"div",10)(65,"label",18)(66,"h6"),e.EFF(67),e.nI1(68,"translate"),e.k0s()(),e.j41(69,"nb-select",19),e.bIt("selectedChange",function(s){return n.selectChangeHandlerDept(s)}),e.DNE(70,V,2,2,"nb-option",20),e.k0s()()(),e.j41(71,"div",3)(72,"div",10)(73,"label",21)(74,"h6"),e.EFF(75),e.nI1(76,"translate"),e.k0s()(),e.nrm(77,"input",22),e.k0s()()(),e.j41(78,"div",23)(79,"div",24)(80,"button",25),e.EFF(81),e.nI1(82,"translate"),e.k0s()()()()()),2&r&&(e.R7$(2),e.Lme("",e.bMT(3,28,"Add")," ",e.bMT(4,30,"Employee")," "),e.R7$(4),e.Y8G("formGroup",n.empForm),e.R7$(6),e.SpI(" ",e.bMT(13,32,"Name")," "),e.R7$(3),e.Y8G("ngIf",n.fc.name.touched&&n.fc.name.hasError("required")),e.R7$(1),e.Y8G("ngIf",n.fc.name.touched&&n.fc.name.hasError("minlength")&&!n.fc.name.hasError("required")),e.R7$(5),e.SpI(" ",e.bMT(22,34,"NationalId")," "),e.R7$(3),e.Y8G("ngIf",n.fc.nationalId.touched&&n.fc.nationalId.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.nationalId.touched&&n.fc.nationalId.hasError("minlength")&&!n.fc.nationalId.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.nationalId.touched&&n.fc.nationalId.hasError("maxlength")&&!n.fc.nationalId.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.nationalId.touched&&n.fc.nationalId.hasError("min")),e.R7$(5),e.SpI(" ",e.bMT(33,36,"Phone")," "),e.R7$(3),e.Y8G("ngIf",n.fc.phone.touched&&n.fc.phone.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.phone.touched&&n.fc.phone.hasError("minlength")&&!n.fc.phone.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.phone.touched&&n.fc.phone.hasError("maxlength")&&!n.fc.phone.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.phone.touched&&n.fc.phone.hasError("min")),e.R7$(5),e.SpI(" ",e.bMT(44,38,"Mobil")," "),e.R7$(3),e.Y8G("ngIf",n.fc.mobil.touched&&n.fc.mobil.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.mobil.touched&&n.fc.mobil.hasError("min")),e.R7$(1),e.Y8G("ngIf",n.fc.mobil.touched&&n.fc.mobil.hasError("minlength")&&!n.fc.mobil.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.mobil.touched&&n.fc.mobil.hasError("maxlength")&&!n.fc.mobil.hasError("pattern")),e.R7$(5),e.SpI(" ",e.bMT(55,40,"Email")," "),e.R7$(7),e.SpI(" ",e.bMT(62,42,"Job")," "),e.R7$(6),e.SpI(" ",e.bMT(68,44,"Department")," "),e.R7$(3),e.Y8G("ngForOf",n.departments),e.R7$(5),e.SpI(" ",e.bMT(76,46,"Notes")," "),e.R7$(5),e.Y8G("disabled",n.empForm.invalid||n.isSubmitted),e.R7$(1),e.SpI(" ",e.bMT(82,48,"Save")," "))},dependencies:[p.i6h,f.Sq,f.bT,i.qT,i.me,i.BC,i.cb,i.xh,i.tU,i.R_,i.j4,i.JD,p.S81,p.ZJ2,c.D9]})}}return t})();function W(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Name is required")," "))}function z(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"min length 3 Letters")," "))}function H(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"NationalId pattern")," "))}function Z(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"NationalId min length")," "))}function Q(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"NationalId max length")," "))}function q(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"NationalId not contain negative number")," "))}function K(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Phone pattern")," "))}function ee(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Phone min length")," "))}function te(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Phone max length")," "))}function ne(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Phone not contain negative number")," "))}function oe(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Mobil pattern")," "))}function re(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Mobil not contain negative number")," "))}function ae(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Mobil min length")," "))}function ie(t,a){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Mobil max length")," "))}function le(t,a){if(1&t&&(e.j41(0,"nb-option",26),e.EFF(1),e.k0s()),2&t){const o=a.$implicit;e.Y8G("value",o.id),e.R7$(1),e.SpI(" ",o.departmentName,"")}}let me=(()=>{class t{constructor(o,r,n,l,s,u,E,b){this.formBuilder=o,this.empService=r,this.deptService=n,this.router=l,this.route=s,this.toastrService=u,this.translate=E,this.departmentService=b,this.submitted=!1,this.isSubmitted=!1,this.showPass=!1,this.departments=[],this.DeptIds=[],(null==localStorage.getItem("token")||""==localStorage.getItem("token"))&&this.router.navigateByUrl("/auth")}ngOnInit(){this.initForm(),this.getDepartmenst(),this.route.params.subscribe(o=>{this.Id=o.id}),this.getEmpInfoById()}getEmpInfoById(){this.empService.getById(this.Id).subscribe(o=>{this.currentEmp=o.entity,this.currentDept=o.entity.department,console.log("CurrentDept="+this.currentDept.values),this.bindForm()})}bindForm(){this.empForm.controls.id.setValue(this.currentEmp.id),this.empForm.controls.name.setValue(this.currentEmp.name),this.empForm.controls.notes.setValue(this.currentEmp.notes),this.empForm.controls.nationalId.setValue(this.currentEmp.nationalId),this.empForm.controls.mobil.setValue(this.currentEmp.mobil),this.empForm.controls.phone.setValue(this.currentEmp.phone),this.empForm.controls.email.setValue(this.currentEmp.email),this.empForm.controls.deptId.setValue(this.currentEmp.deptIds)}getDepartmenst(){this.deptService.searchDepartments({PageNumber:1,PageSize:1e3}).subscribe(o=>{this.departments=o.entity.entities.filter(r=>""!=r.departmentName)})}initForm(){this.empForm=this.formBuilder.group({id:[""],name:["",[i.k0.required,i.k0.minLength(3)]],nationalId:[null,[i.k0.pattern("^[0-9]*$"),i.k0.minLength(10),i.k0.min(0),i.k0.maxLength(10)]],phone:[null,[i.k0.pattern("^[0-9]*$"),i.k0.minLength(10),i.k0.min(0),i.k0.maxLength(10)]],mobil:[null,[i.k0.pattern("^[0-9]*$"),i.k0.minLength(10),i.k0.min(0),i.k0.maxLength(12)]],email:[""],notes:[""],deptId:[null,[i.k0.required]]})}selectChangeHandlerDept(o){this.DeptIds=o,console.log("Departments= "+o)}selectChangeHandlerJob(o){this.JobId=o.target.value,console.log("Job= "+this.JobId)}onSubmit(){console.log("Welcome"),this.submitted=!0,this.isSubmitted=!0;const o=this.empForm.value;let r={id:this.Id,name:o.name,nationalId:o.nationalId,phone:o.phone.toString(),email:o.email,mobil:o.mobil.toString(),notes:o.notes,jobId:o.jobId,deptIds:o.deptId};r.id=this.Id,this.empService.updateEmployee(r).subscribe({next:n=>{this.toastrService.Update(_.C.Employee),this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/Employee")},error:n=>{this.toastrService.danger(n.error.error,"\u062e\u0637\u0623"),this.submitted=!1,this.isSubmitted=!1}})}get fc(){return this.empForm.controls}get deptIds(){return this.deptIds.controls.deptIds}static{this.\u0275fac=function(r){return new(r||t)(e.rXU(i.ok),e.rXU(y.O),e.rXU(F.a),e.rXU(h.Ix),e.rXU(h.nX),e.rXU(S.t),e.rXU(c.c$),e.rXU(F.a))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-edit-employee"]],decls:83,vars:49,consts:[[1,"content-container","mt-5"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","Name",1,"label"],["type","text","formControlName","name","nbInput","","shape","round","fullWidth","","id","name"],[4,"ngIf"],["for","NationalId",1,"label"],["type","text","inputmode","numeric","pattern","[-+]?[0-9]*[.,]?[0-9]+","minlength","10","maxlength","10","formControlName","nationalId","nbInput","","shape","round","fullWidth","","id","nationalId"],[1,"form-group","mt-2"],["for","Phone",1,"label"],["min","0","type","text","inputmode","numeric","pattern","[-+]?[0-9]*[.,]?[0-9]+","maxlength","10","placeholder","Ex:1570572194","formControlName","phone","nbInput","","shape","round","fullWidth","","id","phone"],["for","Mobil",1,"label"],["min","0","type","text","inputmode","numeric","pattern","[0-9]*[.,]?[0-9]+","maxlength","12","placeholder","Ex:9665657801391","formControlName","mobil","nbInput","","shape","round","fullWidth","","id","mobil"],["for","Email",1,"label"],["type","text","placeholder","Ex: dmostafa@jeddah.gov.sa","formControlName","email","nbInput","","shape","round","fullWidth","","id","email"],["for","Job",1,"label"],["for","Department",1,"label"],["shape","round","fullWidth","","multiple","","formControlName","deptId","id","deptId",1,"mt-2",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],["for","Notes",1,"label"],["type","text","formControlName","notes","nbInput","","shape","round","fullWidth","","id","notes"],[1,"row","mt-2"],[1,"col-md-2"],["type","submit",1,"special-button","m-2","mt-4","w-100"],[3,"value"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"h5"),e.EFF(2),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"hr"),e.j41(6,"form",1),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(7,"div",2)(8,"div",3)(9,"div",4)(10,"label",5)(11,"h6"),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.nrm(14,"input",6),e.DNE(15,W,3,3,"mat-error",7),e.DNE(16,z,3,3,"mat-error",7),e.k0s()(),e.j41(17,"div",3)(18,"div",4)(19,"label",8)(20,"h6"),e.EFF(21),e.nI1(22,"translate"),e.k0s()(),e.nrm(23,"input",9),e.DNE(24,H,3,3,"mat-error",7),e.DNE(25,Z,3,3,"mat-error",7),e.DNE(26,Q,3,3,"mat-error",7),e.DNE(27,q,3,3,"mat-error",7),e.k0s()(),e.j41(28,"div",3)(29,"div",10)(30,"label",11)(31,"h6"),e.EFF(32),e.nI1(33,"translate"),e.k0s()(),e.nrm(34,"input",12),e.DNE(35,K,3,3,"mat-error",7),e.DNE(36,ee,3,3,"mat-error",7),e.DNE(37,te,3,3,"mat-error",7),e.DNE(38,ne,3,3,"mat-error",7),e.k0s()(),e.j41(39,"div",3)(40,"div",10)(41,"label",13)(42,"h6"),e.EFF(43),e.nI1(44,"translate"),e.k0s()(),e.nrm(45,"input",14),e.DNE(46,oe,3,3,"mat-error",7),e.DNE(47,re,3,3,"mat-error",7),e.DNE(48,ae,3,3,"mat-error",7),e.DNE(49,ie,3,3,"mat-error",7),e.k0s()(),e.j41(50,"div",3)(51,"div",10)(52,"label",15)(53,"h6"),e.EFF(54),e.nI1(55,"translate"),e.k0s()(),e.nrm(56,"input",16),e.k0s()(),e.j41(57,"div",3)(58,"div",10)(59,"label",17)(60,"h6"),e.EFF(61),e.nI1(62,"translate"),e.k0s()()()(),e.j41(63,"div",3)(64,"div",10)(65,"label",18)(66,"h6"),e.EFF(67),e.nI1(68,"translate"),e.k0s()(),e.j41(69,"nb-select",19),e.bIt("selectedChange",function(s){return n.selectChangeHandlerDept(s)}),e.DNE(70,le,2,2,"nb-option",20),e.k0s()()(),e.j41(71,"div",3)(72,"div",10)(73,"label",21)(74,"h6"),e.EFF(75),e.nI1(76,"translate"),e.k0s()(),e.nrm(77,"input",22),e.k0s()()(),e.j41(78,"div",23)(79,"div",24)(80,"button",25),e.EFF(81),e.nI1(82,"translate"),e.k0s()()()()()),2&r&&(e.R7$(2),e.Lme("",e.bMT(3,27,"Edit")," ",e.bMT(4,29,"Employee")," "),e.R7$(4),e.Y8G("formGroup",n.empForm),e.R7$(6),e.SpI(" ",e.bMT(13,31,"Name")," "),e.R7$(3),e.Y8G("ngIf",n.fc.name.touched&&n.fc.name.hasError("required")),e.R7$(1),e.Y8G("ngIf",n.fc.name.touched&&n.fc.name.hasError("minlength")&&!n.fc.name.hasError("required")),e.R7$(5),e.SpI(" ",e.bMT(22,33,"NationalId")," "),e.R7$(3),e.Y8G("ngIf",n.fc.nationalId.touched&&n.fc.nationalId.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.nationalId.touched&&n.fc.nationalId.hasError("minlength")&&!n.fc.nationalId.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.nationalId.touched&&n.fc.nationalId.hasError("maxlength")&&!n.fc.nationalId.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.nationalId.touched&&n.fc.nationalId.hasError("min")),e.R7$(5),e.SpI(" ",e.bMT(33,35,"Phone")," "),e.R7$(3),e.Y8G("ngIf",n.fc.phone.touched&&n.fc.phone.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.phone.touched&&n.fc.phone.hasError("minlength")&&!n.fc.phone.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.phone.touched&&n.fc.phone.hasError("maxlength")&&!n.fc.phone.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.phone.touched&&n.fc.phone.hasError("min")),e.R7$(5),e.SpI(" ",e.bMT(44,37,"Mobil")," "),e.R7$(3),e.Y8G("ngIf",n.fc.mobil.touched&&n.fc.mobil.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.mobil.touched&&n.fc.mobil.hasError("min")),e.R7$(1),e.Y8G("ngIf",n.fc.mobil.touched&&n.fc.mobil.hasError("minlength")&&!n.fc.mobil.hasError("pattern")),e.R7$(1),e.Y8G("ngIf",n.fc.mobil.touched&&n.fc.mobil.hasError("maxlength")&&!n.fc.mobil.hasError("pattern")),e.R7$(5),e.SpI(" ",e.bMT(55,39,"Email")," "),e.R7$(7),e.SpI(" ",e.bMT(62,41,"Job")," "),e.R7$(6),e.SpI(" ",e.bMT(68,43,"Department")," "),e.R7$(3),e.Y8G("ngForOf",n.departments),e.R7$(5),e.SpI(" ",e.bMT(76,45,"Notes")," "),e.R7$(6),e.SpI(" ",e.bMT(82,47,"Save")," "))},dependencies:[p.i6h,f.Sq,f.bT,i.qT,i.me,i.BC,i.cb,i.xh,i.tU,i.R_,i.j4,i.JD,p.S81,p.ZJ2,c.D9]})}}return t})();var $=m(467),v=m(5312),se=m(6952),pe=m(4866),de=m(8203);const ce=["empFilter"];function he(t,a){1&t&&(e.j41(0,"th",17),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Name")," "))}function ue(t,a){if(1&t){const o=e.RV6();e.j41(0,"span")(1,"input",21,22),e.bIt("keyup",function(n){e.eBV(o);const l=e.XpG(2);return e.Njj(l.applyFilter(n))}),e.nI1(3,"translate"),e.k0s()()}2&t&&(e.R7$(1),e.Y8G("placeholder",e.bMT(3,1,"Employee")))}function fe(t,a){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const o=e.XpG().$implicit;e.R7$(1),e.JRh(o.name)}}function Ee(t,a){if(1&t&&(e.j41(0,"td",18),e.DNE(1,ue,4,3,"span",19),e.DNE(2,fe,2,1,"ng-template",null,20,e.C5r),e.k0s()),2&t){const o=a.$implicit,r=e.sdS(3);e.R7$(1),e.Y8G("ngIf",""==o.name)("ngIfElse",r)}}function be(t,a){1&t&&(e.j41(0,"th",17),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Job")," "))}function Ie(t,a){1&t&&e.nrm(0,"span")}function ge(t,a){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const o=e.XpG().$implicit;e.R7$(1),e.JRh(o.jobName)}}function _e(t,a){if(1&t&&(e.j41(0,"td",18),e.DNE(1,Ie,1,0,"span",19),e.DNE(2,ge,2,1,"ng-template",null,20,e.C5r),e.k0s()),2&t){const o=a.$implicit,r=e.sdS(3);e.R7$(1),e.Y8G("ngIf",""==o.name)("ngIfElse",r)}}function ye(t,a){1&t&&(e.j41(0,"th",23),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.JRh(e.bMT(2,1,"Mobil")))}function Fe(t,a){1&t&&e.nrm(0,"span")}function Se(t,a){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const o=e.XpG().$implicit;e.R7$(1),e.JRh(o.mobil)}}function Ce(t,a){if(1&t&&(e.j41(0,"td",18),e.DNE(1,Fe,1,0,"span",19),e.DNE(2,Se,2,1,"ng-template",null,20,e.C5r),e.k0s()),2&t){const o=a.$implicit,r=e.sdS(3);e.R7$(1),e.Y8G("ngIf",""==o.mobil)("ngIfElse",r)}}function Te(t,a){1&t&&(e.j41(0,"th",23),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.JRh(e.bMT(2,1,"Phone")))}function $e(t,a){1&t&&e.nrm(0,"span")}function ve(t,a){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const o=e.XpG().$implicit;e.R7$(1),e.JRh(o.phone)}}function Re(t,a){if(1&t&&(e.j41(0,"td",18),e.DNE(1,$e,1,0,"span",19),e.DNE(2,ve,2,1,"ng-template",null,20,e.C5r),e.k0s()),2&t){const o=a.$implicit,r=e.sdS(3);e.R7$(1),e.Y8G("ngIf",""==o.name)("ngIfElse",r)}}function ke(t,a){1&t&&(e.j41(0,"th",23),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.JRh(e.bMT(2,1,"Email")))}function Ne(t,a){1&t&&e.nrm(0,"span")}function De(t,a){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const o=e.XpG().$implicit;e.R7$(1),e.JRh(o.email)}}function Me(t,a){if(1&t&&(e.j41(0,"td",18),e.DNE(1,Ne,1,0,"span",19),e.DNE(2,De,2,1,"ng-template",null,20,e.C5r),e.k0s()),2&t){const o=a.$implicit,r=e.sdS(3);e.R7$(1),e.Y8G("ngIf",""==o.name)("ngIfElse",r)}}function je(t,a){1&t&&e.nrm(0,"th",23)}function Ge(t,a){1&t&&e.nrm(0,"span")}function Le(t,a){if(1&t){const o=e.RV6();e.j41(0,"span")(1,"button",24),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,l=e.XpG();return e.Njj(l.ShowEdit(n.id))}),e.j41(2,"mat-icon"),e.EFF(3,"edit"),e.k0s()()()}if(2&t){const o=e.XpG(2);e.R7$(1),e.Y8G("hidden",!o.canEdit)}}function Pe(t,a){if(1&t&&(e.j41(0,"td",18),e.DNE(1,Ge,1,0,"span",19),e.DNE(2,Le,4,1,"ng-template",null,20,e.C5r),e.k0s()),2&t){const o=a.$implicit,r=e.sdS(3);e.R7$(1),e.Y8G("ngIf",0==o.sortable)("ngIfElse",r)}}function Ye(t,a){1&t&&e.nrm(0,"th",23)}function Ue(t,a){1&t&&e.nrm(0,"span")}function Xe(t,a){if(1&t){const o=e.RV6();e.j41(0,"span")(1,"button",25),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,l=e.XpG();return e.Njj(l.delete(n.id,n.name))}),e.j41(2,"mat-icon"),e.EFF(3,"delete"),e.k0s()()()}if(2&t){const o=e.XpG(2);e.R7$(1),e.Y8G("hidden",!o.canDelete)}}function xe(t,a){if(1&t&&(e.j41(0,"td",18),e.DNE(1,Ue,1,0,"span",19),e.DNE(2,Xe,4,1,"ng-template",null,20,e.C5r),e.k0s()),2&t){const o=a.$implicit,r=e.sdS(3);e.R7$(1),e.Y8G("ngIf",0==o.sortable)("ngIfElse",r)}}function Ae(t,a){1&t&&e.nrm(0,"tr",26)}function Be(t,a){1&t&&e.nrm(0,"tr",27)}const Oe=[{path:"",component:(()=>{class t{constructor(o,r,n,l,s,u,E,b){this.toastrService=o,this.translate=r,this.employeeService=n,this.router=l,this.route=s,this._detector=u,this.dialogService=E,this.roleService=b,this.dir="ltr",this.totalRecords=0,this.pageSizeOptions=v.c.DEFAULT_PAGE_SIZE_OPTIONS,this.displayedColumns=["Name","Job","Email","Mobil","Phone","actions1","actions2"],this.empModel=[],(null==localStorage.getItem("token")||""==localStorage.getItem("token"))&&this.router.navigateByUrl("/auth"),"ar"==r.currentLang&&(this.dir="rtl")}ngOnInit(){this.searchModel={PageNumber:1,PageSize:v.c.DEFAULT_PAGE_SIZE},this.search(),this._detector.markForCheck(),this.roleService.getActionByRoleId(localStorage.getItem("RoleId"),"Employee").subscribe(o=>{this.canAdd=o.entity.add,this.canEdit=o.entity.update,this.canDelete=o.entity.delete})}ngAfterViewInit(){this.dataSource.sort=this.sort}sortData(o){const r=this.dataSource.data.slice();o.active&&""!==o.direction?(this.dataSource.data=r.sort((n,l)=>{if(!n.sortable||!l.sortable)return 1;{let s="asc"===o.direction;return"Name"===o.active?this.compare(n.name.toLowerCase(),l.name.toLowerCase(),s):0}}),this.dataSource=new d.I6(this.dataSource.data)):this.dataSource.data=r}compare(o,r,n){return o<r?-1*(n?1:-1):o>r?1*(n?1:-1):0*(n?1:-1)}applyFilter(o){const r={name:this.empFilter.nativeElement.value,sortable:!0};this.dataSource.filterPredicate=(n,l)=>{const s=JSON.parse(l);return""==n.name||n.name.toLowerCase().includes(s.name.toLowerCase())},this.dataSource.filter=JSON.stringify(r),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}search(o){var r=this;return(0,$.A)(function*(){o?(r.searchModel.PageNumber=o.pageIndex+1,r.searchModel.PageSize=o.pageSize):(r.searchModel.PageNumber=1,r.searchModel.PageSize=10),r.employeeService.searchEmployees(r.searchModel).subscribe(n=>{r.empModel=n.entity.entities,r.totalRecords=n.entity.totalRecords,r._detector.markForCheck(),r.dataSource=new d.I6(r.empModel)})})()}delete(o,r){var n=this;return(0,$.A)(function*(){r=yield n.translate.get(r).toPromise();let l=yield n.translate.get("DeleteTitle",{entity:r}).toPromise(),s=yield n.translate.get("DeleteMessage",{entity:r}).toPromise();n.dialogService.open(se.w,{context:{title:`${l}`,body:`${s}?`},closeOnBackdropClick:!1}).onClose.subscribe(u=>{u&&n.employeeService.deleteEmployee(o).subscribe(E=>{n.empModel=n.empModel.filter(b=>b.id!=o),n.search(),n.toastrService.Delete(_.C.Employee)})})})()}ShowGrants(o){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/employee/list/")}ShowAdd(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/Employee/add")}ShowEdit(o){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/Employee/edit/"+o)}static{this.\u0275fac=function(r){return new(r||t)(e.rXU(S.t),e.rXU(c.c$),e.rXU(y.O),e.rXU(h.Ix),e.rXU(h.nX),e.rXU(e.gRc),e.rXU(p.S0W),e.rXU(pe.W))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-list-employees"]],viewQuery:function(r,n){if(1&r&&(e.GBs(I.B4,5),e.GBs(g.iy,5),e.GBs(ce,5)),2&r){let l;e.mGM(l=e.lsd())&&(n.sort=l.first),e.mGM(l=e.lsd())&&(n.paginator=l.first),e.mGM(l=e.lsd())&&(n.empFilter=l.first)}},decls:34,vars:15,consts:[[1,"content-container"],["type","button",1,"special-button","mb-3",3,"hidden","click"],[1,"table-container"],["mat-table","","matSort","","matSortDisableClear","","matSortDirection","asc",1,"users-table","table-striped",3,"dataSource","matSortChange"],["matColumnDef","Name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Job"],["matColumnDef","Mobil"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","Phone"],["matColumnDef","Email"],["matColumnDef","actions2"],["matColumnDef","actions1"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"dir","length","pageIndex","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf","ngIfElse"],["data",""],["type","text","nbInput","","matInput","",1,"text-center",3,"placeholder","keyup"],["empFilter",""],["mat-header-cell",""],["mat-mini-fab","","color","primary",3,"hidden","click"],["mat-mini-fab","","color","warn",3,"hidden","click"],["mat-header-row",""],["mat-row",""]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"h5"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nrm(4,"hr"),e.j41(5,"button",1),e.bIt("click",function(){return n.ShowAdd()}),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"nb-card",2)(9,"table",3),e.bIt("matSortChange",function(s){return n.sortData(s)}),e.qex(10,4),e.DNE(11,he,3,3,"th",5),e.DNE(12,Ee,4,2,"td",6),e.bVm(),e.qex(13,7),e.DNE(14,be,3,3,"th",5),e.DNE(15,_e,4,2,"td",6),e.bVm(),e.qex(16,8),e.DNE(17,ye,3,3,"th",9),e.DNE(18,Ce,4,2,"td",6),e.bVm(),e.qex(19,10),e.DNE(20,Te,3,3,"th",9),e.DNE(21,Re,4,2,"td",6),e.bVm(),e.qex(22,11),e.DNE(23,ke,3,3,"th",9),e.DNE(24,Me,4,2,"td",6),e.bVm(),e.qex(25,12),e.DNE(26,je,1,0,"th",9),e.DNE(27,Pe,4,2,"td",6),e.bVm(),e.qex(28,13),e.DNE(29,Ye,1,0,"th",9),e.DNE(30,xe,4,2,"td",6),e.bVm(),e.DNE(31,Ae,1,0,"tr",14),e.DNE(32,Be,1,0,"tr",15),e.k0s()(),e.j41(33,"mat-paginator",16),e.bIt("page",function(s){return n.search(s)}),e.k0s()()),2&r&&(e.R7$(2),e.SpI(" ",e.bMT(3,11,"Employees")," "),e.R7$(3),e.Y8G("hidden",!n.canAdd),e.R7$(1),e.SpI(" ",e.bMT(7,13,"Add")," "),e.R7$(3),e.Y8G("dataSource",n.dataSource),e.R7$(22),e.Y8G("matHeaderRowDef",n.displayedColumns),e.R7$(1),e.Y8G("matRowDefColumns",n.displayedColumns),e.R7$(1),e.Y8G("dir",n.dir)("length",n.totalRecords)("pageIndex",n.searchModel.PageNumber-1)("pageSize",n.searchModel.PageSize)("pageSizeOptions",n.pageSizeOptions))},dependencies:[p.SrT,p.i6h,f.bT,T.An,de.ig,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,I.B4,I.aE,g.iy,c.D9],styles:[".table-container[_ngcontent-%COMP%]{border-radius:2rem;overflow-x:scroll;overflow-y:auto}table[_ngcontent-%COMP%]{width:20rem}.search-container[_ngcontent-%COMP%]{margin:1rem auto;display:flex;justify-content:center}.col-md-4[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%]{padding:5px!important}.users-table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;border-collapse:collapse}tr[_ngcontent-%COMP%]{height:3.2rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center!important;padding:10px}th[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1.3rem}  .mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0;justify-content:center}"]})}}return t})()},{path:"add",component:w},{path:"edit/:id",component:me}];let Je=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[h.iI.forChild(Oe),h.iI]})}}return t})(),Ve=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[Je,p.lVF,p.P5N,p.pty,f.MD,i.YN,i.X1,p.dQU,p.lVF,p.P5N,p._A2,p.NeG,p.clu,p.VcP,T.m_,d.tP,I.NQ,g.Ou,N.G,c.h.forChild({loader:{provide:c.Wr,useFactory:R._,deps:[k.Qq]}})]})}}return t})()}}]);